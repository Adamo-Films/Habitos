<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danilo no üéÆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Bungee:wght@700&family=Bebas+Neue&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Antonio:wght@100&family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #ffe379;
      --gold2: #e4c145;
      --gold3: #f7e399;
      --corpo: #191919;
      --day-inactive: #f2f2f7;
      --header-img-height: 250px;
    }
    html, body { height: 100%; margin: 0; padding: 0;}
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--corpo);
      color: var(--day-inactive);
      min-height: 100vh;
      transition: background 0.3s;
    }
    /* ---------- BANNER GAMER ---------- */
    .banner-gamer-wrap {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      height: var(--header-img-height);
      position: relative;
      margin-bottom: -18px; /* Cola a base da imagem na linha dourada da tabela */
      z-index: 100;
      pointer-events: none;
      user-select: none;
    }
    .banner-gamer-img {
      height: var(--header-img-height);
      width: auto;
      max-width: 97vw;
      display: block;
      filter:
        drop-shadow(0 8px 38px #19e0fc88)
        drop-shadow(0 1px 18px #ff38fd88)
        drop-shadow(0 0 20px #0008);
      position: relative;
      z-index: 2;
      pointer-events: none;
      user-select: none;
      object-fit: contain;
    }
    @media (max-width: 900px) {
      .banner-gamer-img { height: 115px; max-width: 98vw; }
      .banner-gamer-wrap { height: 115px; margin-bottom: -9px;}
    }
    /* ---------- CONTAINER & CALEND√ÅRIO ---------- */
    .container {
      max-width: 1300px;
      margin: 0 auto;
      padding: 0 32px;
      position: relative;
      z-index: 2;
    }
    .mes {
      font-family: 'Antonio', Arial Narrow, Arial, sans-serif;
      font-size: 2.06em;
      margin: 0 0 13px;
      border-bottom: 2px solid #f9c74f;
      padding-bottom: 5px;
      letter-spacing: 0.11em;
      color: #f9c74f;
      text-shadow: 0 3px 13px #0009;
      text-align: left;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
      background: none;
      border-radius: 18px;
      overflow: hidden;
      font-family: 'Inter', Arial, sans-serif;
      font-size: 1.09em;
      font-weight: 400;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #333;
      vertical-align: middle;
      z-index: 2;
      background: transparent !important;
    }
    th {
      background-color: #1e1e1e !important;
      color: #f9c74f !important;
      font-size: 1.06em;
      font-weight: 700;
      letter-spacing: 0.02em;
      z-index: 2;
    }
    tr.main-row {
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
      --progress: 0;
      background: linear-gradient(
        90deg,
        var(--gold) 0%,
        var(--gold2) 45%,
        var(--gold3) 100%
      );
      background-size: calc(var(--progress, 0) * 100%) 100%;
      background-repeat: no-repeat;
      background-position: left top;
      box-shadow: 0 2px 10px 0 #0008;
      color: #dedede !important;
    }
    tr.main-row.day-complete {
      color: #201d09 !important;
      font-weight: bold;
      letter-spacing: 1.1px;
      border-left: 4px solid var(--gold2);
      border-right: 2px solid var(--gold3);
      border-radius: 2px;
      box-shadow: 0 0 5px 0 var(--gold2), 0 2px 12px 2px #ffe37980, 0 0 0 2px #e4c14570 inset;
      background-size: 100% 100% !important;
      color: #222 !important;
    }
    .main-row-text {
      font-weight: 600;
      /* Gradiente que "tinta" o texto de preto at√© o ponto da barra dourada */
      background: linear-gradient(
        90deg,
        #191919 calc(var(--progress, 0) * 100%),
        #fff calc(var(--progress, 0) * 100%)
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      transition: background .28s cubic-bezier(.6,1.2,.16,1.08);
      position: relative;
      z-index: 2;
      font-size: 1.08em;
    }
    tr.main-row.day-complete .main-row-text {
      background: #ffe379 !important;
      -webkit-text-fill-color: #191919 !important;
      color: #191919 !important;
    }
    .expand-icon { display: inline-block; width: 16px; transition: transform 0.2s; }
    .main-row.expanded > .expand-icon { transform: rotate(90deg); }
    .dropdown { display: none; transition: all 0.45s cubic-bezier(.4,1.2,.23,1.05); animation: none; height: 0; padding: 0;}
    .dropdown.active { display: table-row; animation: slideDown 0.35s cubic-bezier(.2,1.1,.42,1.09); height: auto;}
    @keyframes slideDown {0%{opacity:0;transform:translateY(-28px)scaleY(0.7);}70%{opacity:1;transform:translateY(5px)scaleY(1.09);}100%{opacity:1;transform:translateY(0)scaleY(1);} }
    .dropdown.drop-up {animation: slideUp 0.44s cubic-bezier(.2,1.2,.42,1.01);}
    @keyframes slideUp {0%{opacity:1;transform:translateY(0)scaleY(1);}100%{opacity:0;transform:translateY(-38px)scaleY(0.65);} }
    .dropdown > td { padding: 0;}
    .habit-list {
      margin: 16px 0 18px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      width: 100%;
    }
    .habit-item {
      display: grid;
      grid-template-columns: 52px 1fr 46px;
      align-items: center;
      width: 100%;
      min-width: 340px;
      max-width: 500px;
      background: none;
      border-radius: 9px;
      padding: 4px 8px 4px 2px;
      margin-bottom: 0;
      transition: background 0.22s, box-shadow 0.22s;
      color: #fafbfc !important;
      box-sizing: border-box;
    }
    .habit-item.habit-complete {
      background: linear-gradient(90deg, var(--gold3) 2%, var(--gold2) 40%, var(--gold) 99%);
      box-shadow: 0 2px 15px 0 #ffe37955;
      color: #232201 !important; font-weight: 700;
    }
    .habit-emoji {
      font-size: 1.7em; min-width: 40px; min-height: 38px;
      display: flex; align-items: center; justify-content: center;
      margin-right: 5px; margin-left: 2px; text-align: center;
      cursor: pointer; user-select: none;
      filter: drop-shadow(0 2px 6px #0006);
      background: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      border: none !important;
      transition: transform 0.18s, filter 0.17s, box-shadow 0.17s;
      position: relative; z-index: 3; vertical-align: middle;
      color: #fff !important;
      justify-self: start;
    }
    .habit-emoji:hover, .habit-emoji.glow {
      animation: emoji-bounce 0.5s cubic-bezier(.24,-0.06,.41,1.37) 1;
      filter: drop-shadow(0 0 10px #39e6ff) drop-shadow(0 0 16px #2363ffbb);
      box-shadow: none;
      background: none;
    }
    @keyframes emoji-bounce {
      0%   { transform: scale(1) rotate(0);}
      30%  { transform: scale(1.19) rotate(-17deg);}
      55%  { transform: scale(0.94) rotate(15deg);}
      70%  { transform: scale(1.13) rotate(-9deg);}
      100% { transform: scale(1) rotate(0);}
    }
    .habit-label {
      font-size: 1.12em;
      color: #fff !important;
      letter-spacing: 0.04em;
      font-family: 'Inter', Arial, sans-serif;
      display: flex; align-items: center;
      vertical-align: middle; transition: color 0.19s;
      padding: 0 8px;
      min-width: 110px; max-width: 340px;
      flex: 1 1 auto;
      justify-self: stretch;
      word-break: break-word;
    }
    .habit-done { text-decoration: line-through; color: #888 !important; }
    .habit-checkbox {
      transform: scale(1.18); cursor: pointer; margin-left: 8px; margin-right: 8px;
      accent-color: #ffe379; vertical-align: middle;
      display: flex; align-items: center; justify-content: center; min-height: 38px;
      justify-self: end;
    }
    /* Confetti canvas */
    #confetti-canvas { position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9999; display: none; }
    #celebrate-text {
      display: none; position: fixed; left: 50%; top: 38%;
      transform: translate(-50%, -50%);
      font-size: 5vw;
      color: #00aaff;
      text-shadow: 0 0 7px #ffffff, 0 0 50px #00aaff, 0 0 90px #003e7a, 2px 2px 0 #081d4e;
      font-weight: 900;
      font-family: 'Bungee', 'Bebas Neue', Arial Black, Arial, sans-serif;
      text-transform: uppercase; letter-spacing: 0.04em; animation: celebrateText 2.5s ease-out;
      background: none !important; border: none !important; border-radius: 0 !important; padding: 0 18px 0 18px;
    }
    @keyframes celebrateText {0%{transform:translate(-50%,-50%)scale(0.7);opacity:0;}50%{transform:translate(-50%,-56%)scale(1.12);opacity:1;}100%{transform:translate(-50%,-50%)scale(1);opacity:1;} }
  </style>
</head>
<body>
  <div class="banner-gamer-wrap">
    <img src="https://i.imgur.com/Krb7yXe.png" alt="" class="banner-gamer-img">
  </div>
  <div class="container">
    <div id="calendario"></div>
  </div>
  <canvas id="confetti-canvas"></canvas>
  <div id="celebrate-text">VAI MLK!!!</div>
  <audio id="celebrate-audio">
    <source src="https://cdn.jsdelivr.net/gh/napthedev/short-audio/success.mp3" type="audio/mpeg">
    <source src="https://cdn.jsdelivr.net/gh/napthedev/short-audio/success.ogg" type="audio/ogg">
  </audio>
<script>
  // --- HEADER DIN√ÇMICO OMITIDO, A IMAGEM DO BANNER EST√Å FIXA NO TOPO ---

  // EMOJIS para cada h√°bito
  const habitEmojis = [
    "üíß", "ü§≥", "‚öñÔ∏è", "ü•ó", "‚è∞", "üßò", "üèãÔ∏è", "üìö", "üç´üö´", "üáÆüáπ",
  ];
  const cycleEmojis = ["üí¨", "üöø", "üß†", "üôè"];

  function unlockScroll() {
    document.body.style.overflow = "";
    document.documentElement.style.overflow = "";
  }
  function launchConfettiEpic() {
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    canvas.style.display = 'block';
    document.body.style.overflow = "hidden";
    let W = canvas.width, H = canvas.height;
    let particles = [];
    let colors = ['#ffe379','#e4c145','#f7e399','#FF522E','#fafff9','#FFD700','#FF69B4','#00E6F6','#82FF6A','#FF6666','#0ed156','#001130','#fd2a49'];
    for (let i = 0; i < 1200; i++) {
      particles.push({
        x: Math.random() * W,
        y: Math.random() * -H,
        r: 7 + Math.random() * 12,
        d: Math.random() * 180,
        color: colors[Math.floor(Math.random()*colors.length)],
        tilt: Math.random() * 16 - 8,
        tiltAngle: 0,
        tiltAngleIncremental: (Math.random() * 0.09) + .05,
        alpha: 0.84 + Math.random() * 0.16
      });
    }
    let angle = 0;
    function draw() {
      ctx.clearRect(0, 0, W, H);
      for (let i = 0; i < particles.length; i++) {
        ctx.beginPath();
        ctx.lineWidth = particles[i].r / 2;
        ctx.strokeStyle = particles[i].color;
        ctx.globalAlpha = particles[i].alpha;
        ctx.moveTo(particles[i].x + particles[i].tilt + particles[i].r / 4, particles[i].y);
        ctx.lineTo(particles[i].x + particles[i].tilt, particles[i].y + particles[i].r);
        ctx.stroke();
      }
      ctx.globalAlpha = 1;
      update();
    }
    function update() {
      angle += 0.008;
      for (let i = 0; i < particles.length; i++) {
        particles[i].y += (Math.cos(angle + particles[i].d) + 2.8 + particles[i].r/6) * 0.93;
        particles[i].x += Math.sin(angle*1.18 + i) * 2.7;
        particles[i].tiltAngle += particles[i].tiltAngleIncremental;
        particles[i].tilt = Math.sin(particles[i].tiltAngle - (i % 3)) * 18;
        if (particles[i].y > H + 30) {
          particles[i].y = -14;
          particles[i].x = Math.random() * W;
        }
      }
    }
    let interval = setInterval(draw, 13);
    const celebrateText = document.getElementById('celebrate-text');
    celebrateText.style.display = 'block';
    setTimeout(() => {
      clearInterval(interval);
      ctx.clearRect(0, 0, W, H);
      canvas.style.display = 'none';
      celebrateText.style.display = 'none';
      unlockScroll();
    }, 4000);
  }

  function getProgress() {
    const progress = localStorage.getItem('habits-progress-v1');
    return progress ? JSON.parse(progress) : {};
  }
  function saveProgress(progress) {
    localStorage.setItem('habits-progress-v1', JSON.stringify(progress));
  }

  document.addEventListener("DOMContentLoaded", function() {
    iniciarCalendario();
    function iniciarCalendario() {
      // DADOS E GERA√á√ÉO DA TABELA
      const dados = [];
      const habitos_incrementais = {
        1: ["Beber 2L de √°gua", "Tirar selfie", "Verificar peso"],
        5: ["Dieta com alimentos integrais"],
        9: ["Acordar √†s 5h"],
        13: ["Medita√ß√£o (10 min por dia)"],
        17: ["Exerc√≠cio (60 min)"],
        21: ["Leitura (30 min)"],
        25: ["Alimenta√ß√£o sem a√ß√∫car refinado"],
        29: ["Pr√°tica de italiano (20 min por dia)"]
      };
      const habitos_ciclicos = ["Afirma√ß√µes","Banho gelado","Exerc√≠cio de agilidade mental","Di√°rio e gratid√£o"];
      const inicio = new Date(2025, 4, 21), fim = new Date(2025, 7, 21);
      const dias_total = Math.floor((fim - inicio) / (1000 * 60 * 60 * 24)) + 1;

      let habitos_ativos = [];
      let currentHabit = '';
      let lastHabitIndex = 0;
      let currentWindow = 1;

      // Cria um array para saber qual o novo h√°bito de cada ciclo de 4 dias
      let habitWindows = [];
      let idx = 1;
      Object.keys(habitos_incrementais).forEach(key=>{
        for(let i=0;i<4;i++){
          habitWindows.push(habitos_incrementais[key][0] || habitos_incrementais[key]);
        }
        idx++;
      });
      // Garante que habitWindows cubra todos os dias
      while(habitWindows.length < dias_total) {
        habitWindows.push('');
      }

      for (let i = 1; i <= dias_total; i++) {
        const data_atual = new Date(inicio); data_atual.setDate(inicio.getDate() + i - 1);

        // Incrementa h√°bitos conforme dia
        if (habitos_incrementais[i]) habitos_ativos = habitos_ativos.concat(habitos_incrementais[i]);

        // NOVO: novoHabito √© o habitWindow desse ciclo de 4 dias
        let novoHabito = habitWindows[i-1] || '';
        // Exibe o novo h√°bito por 4 dias seguidos (de cada ciclo)
        let novosHabitos = (novoHabito && i>=1) ? [novoHabito] : [];

        const habito_ciclico = habitos_ciclicos[(i - 1) % 4];

        dados.push({
          data: data_atual.toLocaleDateString('pt-BR'),
          dia: `Dia ${i}`,
          habitos: [...habitos_ativos],
          novosHabitos: novosHabitos,
          ciclico: habito_ciclico,
          mes: data_atual.getMonth() + 1,
          ano: data_atual.getFullYear(),
          id: `dia-${data_atual.getFullYear()}-${data_atual.getMonth()+1}-${data_atual.getDate()}`
        });
      }
      const calendario = document.getElementById("calendario");
      const grupos = {};
      dados.forEach((obj) => {
        const id = `${obj.mes}-${obj.ano}`; if (!grupos[id]) grupos[id] = []; grupos[id].push(obj);
      });
      let html = '';
      Object.entries(grupos).forEach(([id, dias]) => {
        const [mes, ano] = id.split("-");
        const nomeMes = new Date(`${ano}-${mes}-01`).toLocaleString('pt-BR', { month: 'long' });
        html += `<div class='mes'>${nomeMes.toUpperCase()} ${ano}</div>
        <table>
          <thead>
            <tr>
              <th></th>
              <th>Data</th>
              <th>Dia</th>
              <th>H√°bitos Di√°rios</th>
              <th>H√°bito C√≠clico</th>
            </tr>
          </thead>
          <tbody>`;
        dias.forEach((dia, i) => {
          // Mostra o novo h√°bito para os 4 dias a partir da introdu√ß√£o, nunca "-"
          const habitosDisplay = dia.novosHabitos.length
            ? `<span class="main-row-text">${dia.novosHabitos.join(', ')}</span>`
            : `<span class="main-row-text"></span>`;
          html += `
          <tr class="main-row" data-dropdown="${dia.id}" id="mainrow-${dia.id}" style="--progress:0">
            <td><span class="expand-icon">&#9654;</span></td>
            <td>${dia.data}</td>
            <td>${dia.dia}</td>
            <td>${habitosDisplay}</td>
            <td>${dia.ciclico}</td>
          </tr>
          <tr class="dropdown" id="dropdown-${dia.id}">
            <td colspan="5">
              <div class="habit-list">
                ${dia.habitos.map((h, idx) => `
                  <div class="habit-item" id="habititem-${dia.id}-habit-${idx}">
                    <span class="habit-emoji" tabindex="0" data-checkbox="${dia.id}-habit-${idx}">${habitEmojis[idx % habitEmojis.length]}</span>
                    <label class="habit-label" for="${dia.id}-habit-${idx}" id="label-${dia.id}-habit-${idx}">${h}</label>
                    <input type="checkbox" class="habit-checkbox" id="${dia.id}-habit-${idx}">
                  </div>
                `).join('')}
                <div class="habit-item" id="habititem-${dia.id}-ciclico">
                  <span class="habit-emoji" tabindex="0" data-checkbox="${dia.id}-ciclico">${cycleEmojis[(i)%cycleEmojis.length]}</span>
                  <label class="habit-label" for="${dia.id}-ciclico" id="label-${dia.id}-ciclico">${dia.ciclico}</label>
                  <input type="checkbox" class="habit-checkbox" id="${dia.id}-ciclico">
                </div>
              </div>
            </td>
          </tr>`;
        });
        html += `</tbody></table>`;
      });
      calendario.innerHTML = html;

      // LOAD PROGRESS (local)
      const progress = getProgress();
      Object.keys(progress).forEach(checkId => {
        const checkbox = document.getElementById(checkId);
        if (checkbox) {
          checkbox.checked = progress[checkId];
          const label = document.getElementById('label-' + checkId);
          if (label) label.classList.toggle('habit-done', progress[checkId]);
          const hi = document.getElementById('habititem-' + checkId);
          if (hi) hi.classList.toggle('habit-complete', progress[checkId]);
        }
      });

      // Atualiza barra de progresso dourada por dia e texto
      function updateProgressBar(dayId, habitCount) {
        let checked = 0;
        for (let i=0; i<habitCount; i++) {
          if (document.getElementById(`${dayId}-habit-${i}`)?.checked) checked++;
        }
        if (document.getElementById(`${dayId}-ciclico`)?.checked) checked++;
        let pct = checked / habitCount;
        const row = document.getElementById(`mainrow-${dayId}`);
        if (row) {
          row.style.transition = 'background-size 0.7s cubic-bezier(.6,1.2,.16,1.08)';
          row.style.setProperty('--progress', pct);

          // Faz o gradiente do texto de acordo com a barra dourada de progresso (letras cobertas ficam pretas)
          const textCell = row.querySelector('.main-row-text');
          if (textCell) {
            textCell.style.background = `linear-gradient(90deg, #191919 ${pct*100}%, #fff ${pct*100}%)`;
            textCell.style.webkitBackgroundClip = "text";
            textCell.style.webkitTextFillColor = "transparent";
            textCell.style.backgroundClip = "text";
            textCell.style.textFillColor = "transparent";
          }

          if (pct === 1) row.classList.add('day-complete');
          else row.classList.remove('day-complete');
        }
      }

      // Dropdown toggle
      document.querySelectorAll('tr.main-row').forEach(row => {
        row.addEventListener('click', function(e) {
          if (e.target.tagName === 'INPUT' || e.target.classList.contains('habit-emoji')) return;
          const dropdownId = this.getAttribute('data-dropdown');
          const dropdown = document.getElementById(`dropdown-${dropdownId}`);
          if(dropdown.classList.contains('active')) {
            dropdown.classList.remove('active');
            dropdown.classList.add('drop-up');
            setTimeout(()=>dropdown.classList.remove('drop-up'), 400);
            this.classList.remove('expanded');
          } else {
            document.querySelectorAll('.dropdown.active').forEach(dd=>{
              dd.classList.remove('active');
              dd.classList.add('drop-up');
              setTimeout(()=>dd.classList.remove('drop-up'), 400);
              document.querySelector(`.main-row[data-dropdown="${dd.id.replace('dropdown-','')}"]`).classList.remove('expanded');
            });
            dropdown.classList.add('active');
            dropdown.classList.remove('drop-up');
            this.classList.add('expanded');
          }
        });
      });

      function checkAllHabitsComplete(dayId, habitCount) {
        let complete = true;
        for(let i=0; i<habitCount; i++) {
          if (!document.getElementById(`${dayId}-habit-${i}`)?.checked) {
            complete = false;
            break;
          }
        }
        if (complete && !document.getElementById(`${dayId}-ciclico`)?.checked) complete = false;
        return complete;
      }

      function playCelebrateSound() {
        const audio = document.getElementById('celebrate-audio');
        audio.currentTime = 0; audio.volume = 0.97;
        let played = false;
        audio.play().then(()=>{played=true;}).catch(()=>{
          if (!played) {
            document.body.addEventListener('pointerdown', ()=>{audio.play();}, {once:true});
          }
        });
      }

      document.querySelectorAll('.habit-checkbox').forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          const label = document.getElementById('label-' + this.id);
          if(label) label.classList.toggle('habit-done', this.checked);
          let progress = getProgress();
          progress[this.id] = this.checked;
          saveProgress(progress);
          const hi = document.getElementById('habititem-' + this.id);
          if (hi) hi.classList.toggle('habit-complete', this.checked);
          const parts = this.id.match(/^dia-\d+-\d+-\d+/);
          if(parts) {
            const dayId = parts[0];
            const habitCount = document.querySelectorAll(`#dropdown-${dayId} .habit-checkbox`).length;
            updateProgressBar(dayId, habitCount);
            const allDone = checkAllHabitsComplete(dayId, habitCount-1);
            const dropdown = document.getElementById(`dropdown-${dayId}`);
            const dayRow = document.getElementById(`mainrow-${dayId}`);
            if(allDone) {
              dayRow.classList.add('day-complete');
              launchConfettiEpic();
              playCelebrateSound();
              setTimeout(()=>{
                if(dropdown) {
                  dropdown.classList.remove('active');
                  dropdown.classList.add('drop-up');
                  setTimeout(()=>dropdown.classList.remove('drop-up'), 400);
                }
                if(dayRow) dayRow.classList.remove('expanded');
                unlockScroll();
              }, 950);
            } else {
              dayRow.classList.remove('day-complete');
            }
          }
        });
      });

      document.querySelectorAll('.habit-emoji').forEach(emoji=>{
        emoji.addEventListener('mouseenter', function() {
          emoji.classList.add('glow');
          setTimeout(()=>emoji.classList.remove('glow'), 680);
        });
        emoji.addEventListener('mouseleave', function() {
          emoji.classList.remove('glow');
        });
        emoji.addEventListener('click', function(e) {
          e.stopPropagation();
          const id = emoji.getAttribute('data-checkbox');
          const checkbox = document.getElementById(id);
          if(checkbox) {
            checkbox.checked = !checkbox.checked;
            checkbox.dispatchEvent(new Event('change'));
          }
        });
      });

      dados.forEach((dia) => {
        const habitCount = dia.habitos.length + 1;
        updateProgressBar(dia.id, habitCount);
        const allDone = checkAllHabitsComplete(dia.id, habitCount-1);
        if(allDone) {
          const dayRow = document.getElementById(`mainrow-${dia.id}`);
          if (dayRow) dayRow.classList.add('day-complete');
        }
      });

      window.addEventListener('resize', function() {
        const canvas = document.getElementById('confetti-canvas');
        if(canvas.style.display === 'block') {
          canvas.width = window.innerWidth;
          canvas.height = window.innerHeight;
        }
      });
    }
  });
</script>
</body>
</html>
