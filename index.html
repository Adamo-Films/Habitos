<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Danilo no Gamer</title>
  <link href="https://fonts.googleapis.com/css?family=Bebas+Neue:700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Archivo+Black&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inter:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #ffe379;
      --gold2: #e4c145;
      --gold3: #f7e399;
      --corpo: #191919;
      --day-inactive: #f2f2f7;
      --header-height: 310px;
      --header-shrink: 62px;
      --blue: #0d7af8;
      --blue-dark: #0650a9;
    }
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--corpo);
      color: var(--day-inactive);
      min-height: 100vh;
    }
    .container {
      max-width: 1300px;
      margin: 0 auto;
      padding: 0 32px;
    }
    /* HEADER BANNER */
    .banner-gamer {
      width: 550px;
      max-width: 90vw;
      margin: 0 auto 0 auto;
      display: block;
      position: relative;
      z-index: 4;
      margin-top: 38px;
      margin-bottom: 12px;
      pointer-events: none;
      user-select: none;
      filter: drop-shadow(0 0 110px #0d7af880)
              drop-shadow(0 0 60px #4fc2ffb5)
              drop-shadow(0 0 13px #ff23c855)
              drop-shadow(0 0 60px #22004399);
    }
    @media (max-width: 800px) {
      .banner-gamer { width: 92vw; margin-top: 15px;}
    }
    /* Alinhar e posicionar o banner */
    .header-container {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      flex-direction: column;
      position: relative;
      height: 312px;
      z-index: 4;
    }
    .header-line {
      width: 100%;
      border: none;
      border-top: 4px solid var(--gold2);
      box-shadow: 0 4px 20px #000a;
      position: absolute;
      bottom: 0; left: 0; right: 0;
      z-index: 6;
    }
    /* Garantir que a imagem encoste na linha */
    .header-container {
      position: relative;
      height: 312px;
      margin-bottom: -26px;
      z-index: 6;
    }
    .banner-gamer {
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translate(-50%, 32px);
      z-index: 8;
      /* height: 300px; */
    }
    /* TITULO DA SE√á√ÉO */
    .mes {
      font-family: 'Bebas Neue', Arial Narrow, Arial, sans-serif;
      font-size: 2.06em;
      margin: 72px 0 13px;
      border-bottom: 2px solid #f9c74f;
      padding-bottom: 5px;
      letter-spacing: 0.11em;
      color: #f9c74f;
      text-shadow: 0 3px 13px #0009;
      text-align: left;
      z-index: 10;
      position: relative;
    }
    /* TABELA */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 40px;
      background: none;
      border-radius: 18px;
      overflow: hidden;
      font-family: 'Inter', Arial, sans-serif;
      font-size: 1.09em;
      font-weight: 400;
    }
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #333;
      vertical-align: middle;
      background: transparent !important;
      z-index: 2;
      position: relative;
    }
    th {
      background-color: #1e1e1e !important;
      color: #f9c74f !important;
      font-size: 1.06em;
      font-weight: 700;
      letter-spacing: 0.02em;
    }
    tr.main-row {
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
      --progress: 0;
      background: linear-gradient(
        90deg,
        var(--gold) 0%,
        var(--gold2) 45%,
        var(--gold3) 100%
      );
      background-size: calc(var(--progress, 0) * 100%) 100%;
      background-repeat: no-repeat;
      background-position: left top;
      box-shadow: 0 2px 10px 0 #0008;
      color: #dedede !important;
    }
    tr.main-row.day-complete {
      color: #201d09 !important;
      font-weight: bold;
      letter-spacing: 1.1px;
      text-shadow: 0 1px 2px #fff7, 0 0 4px #ffe37944, 0 2px 4px #e4c14566;
      border-left: 4px solid var(--gold2);
      border-right: 2px solid var(--gold3);
      border-radius: 2px;
      box-shadow: 0 0 5px 0 var(--gold2), 0 2px 12px 2px #ffe37980, 0 0 0 2px #e4c14570 inset;
      background-size: 100% 100% !important;
      color: #222 !important;
    }
    /* FADE PROGRESS TEXT */
    tr.main-row .progress-text {
      background: linear-gradient(90deg, #222 50%, #fff 50%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-fill-color: transparent;
      display: inline-block;
      font-weight: 700;
      position: relative;
      z-index: 3;
      transition: color 0.25s;
    }
    tr.main-row .progress-text.gold {
      color: #2d2b16 !important;
      -webkit-text-fill-color: #2d2b16;
      text-fill-color: #2d2b16;
      background: none;
      text-shadow: 0 2px 8px #ffe379a8, 0 2px 14px #fff5, 0 2px 7px #ffe37970;
    }
    /* Outras colunas tamb√©m mudam cor no progresso */
    tr.main-row .gold {
      color: #2d2b16 !important;
      font-weight: bold;
      text-shadow: 0 2px 8px #ffe379a8, 0 2px 14px #fff5, 0 2px 7px #ffe37970;
    }
    /* Dropdown */
    .expand-icon { display: inline-block; width: 16px; transition: transform 0.2s; }
    .main-row.expanded > .expand-icon { transform: rotate(90deg); }
    .dropdown { display: none; transition: all 0.45s cubic-bezier(.4,1.2,.23,1.05); animation: none; height: 0; padding: 0;}
    .dropdown.active { display: table-row; animation: slideDown 0.35s cubic-bezier(.2,1.1,.42,1.09); height: auto;}
    @keyframes slideDown {0%{opacity:0;transform:translateY(-28px)scaleY(0.7);}70%{opacity:1;transform:translateY(5px)scaleY(1.09);}100%{opacity:1;transform:translateY(0)scaleY(1);} }
    .dropdown.drop-up {animation: slideUp 0.44s cubic-bezier(.2,1.2,.42,1.01);}
    @keyframes slideUp {0%{opacity:1;transform:translateY(0)scaleY(1);}100%{opacity:0;transform:translateY(-38px)scaleY(0.65);} }
    .dropdown > td { padding: 0;}
    .habit-list {
      margin: 16px 0 18px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 12px;
      width: 100%;
    }
    .habit-item {
      display: grid;
      grid-template-columns: 52px 1fr 46px;
      align-items: center;
      width: 100%;
      min-width: 340px;
      max-width: 500px;
      background: none;
      border-radius: 9px;
      padding: 4px 8px 4px 2px;
      margin-bottom: 0;
      color: #fafbfc !important;
      box-sizing: border-box;
      font-size: 1.11em;
    }
    .habit-item.habit-complete {
      background: linear-gradient(90deg, var(--gold3) 2%, var(--gold2) 40%, var(--gold) 99%);
      box-shadow: 0 2px 15px 0 #ffe37955;
      color: #232201 !important; font-weight: 700;
    }
    .habit-emoji {
      font-size: 1.7em; min-width: 40px; min-height: 38px;
      display: flex; align-items: center; justify-content: center;
      margin-right: 5px; margin-left: 2px; text-align: center;
      cursor: pointer; user-select: none;
      filter: drop-shadow(0 2px 6px #0006);
      background: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      border: none !important;
      transition: transform 0.18s, filter 0.17s, box-shadow 0.17s;
      position: relative; z-index: 3; vertical-align: middle;
      color: #fff !important;
      justify-self: start;
    }
    .habit-emoji:hover, .habit-emoji.glow {
      animation: emoji-bounce 0.5s cubic-bezier(.24,-0.06,.41,1.37) 1;
      filter: drop-shadow(0 0 10px #39e6ff) drop-shadow(0 0 16px #2363ffbb);
    }
    @keyframes emoji-bounce {
      0%   { transform: scale(1) rotate(0);}
      30%  { transform: scale(1.19) rotate(-17deg);}
      55%  { transform: scale(0.94) rotate(15deg);}
      70%  { transform: scale(1.13) rotate(-9deg);}
      100% { transform: scale(1) rotate(0);}
    }
    .habit-label {
      font-size: 1.12em;
      color: #fff !important;
      letter-spacing: 0.04em;
      font-family: 'Inter', Arial, sans-serif;
      display: flex; align-items: center;
      vertical-align: middle; transition: color 0.19s;
      padding: 0 8px;
      min-width: 110px; max-width: 340px;
      flex: 1 1 auto;
      justify-self: stretch;
      word-break: break-word;
    }
    .habit-done { text-decoration: line-through; color: #888 !important; }
    .habit-checkbox {
      transform: scale(1.18); cursor: pointer; margin-left: 8px; margin-right: 8px;
      accent-color: #ffe379; vertical-align: middle;
      display: flex; align-items: center; justify-content: center; min-height: 38px;
      justify-self: end;
    }
    /* CELEBRATORY TEXT */
    #celebrate-text {
      display: none;
      position: fixed;
      left: 50%;
      top: 38%;
      transform: translate(-50%, -50%);
      font-size: 9vw;
      color: var(--blue-dark);
      text-shadow:
        0 0 80px #0650a9,
        0 0 38px #003563,
        0 0 10px #001B2E,
        0 2px 0 #0d222c;
      font-family: 'Archivo Black', 'Bebas Neue', Arial, sans-serif;
      font-weight: bold;
      z-index: 10000;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      background: none !important;
      border: none !important;
      border-radius: 0 !important;
      padding: 0 18px 0 18px;
      white-space: nowrap;
      line-height: 0.97;
      text-align: center;
      filter: drop-shadow(0 0 20px #003b7d);
    }
    @media (max-width: 700px) {
      #celebrate-text { font-size: 17vw; }
      .banner-gamer { width: 98vw; }
      .header-container { height: 170px; }
    }
    /* Confetti canvas */
    #confetti-canvas { position: fixed; left: 0; top: 0; width: 100vw; height: 100vh; pointer-events: none; z-index: 9999; display: none; }
  </style>
</head>
<body>
  <div class="header-container">
    <img class="banner-gamer" src="https://i.imgur.com/Krb7yXe.png" alt="Banner Gamer">
    <hr class="header-line">
  </div>
  <div class="container">
    <div id="calendario"></div>
  </div>
  <canvas id="confetti-canvas"></canvas>
  <div id="celebrate-text">VAI MLK!!!</div>
  <audio id="celebrate-audio">
    <source src="https://cdn.jsdelivr.net/gh/napthedev/short-audio/success.mp3" type="audio/mpeg">
    <source src="https://cdn.jsdelivr.net/gh/napthedev/short-audio/success.ogg" type="audio/ogg">
  </audio>
<script>
  // HEADER SKY GRADIENT REMOVED
  // Shrink header removed

  // EMOJIS para cada h√°bito
  const habitEmojis = [
    "üíß", "ü§≥", "‚öñÔ∏è", "ü•ó", "‚è∞", "üßò", "üèãÔ∏è", "üìö", "üç´üö´", "üáÆüáπ",
  ];
  const cycleEmojis = ["üí¨", "üöø", "üß†", "üôè"];

  // CONFETTI
  function launchConfettiEpic() {
    const canvas = document.getElementById('confetti-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    canvas.style.display = 'block';
    document.body.style.overflow = "hidden";
    let W = canvas.width, H = canvas.height;
    let particles = [];
    let colors = ['#ffe379','#e4c145','#f7e399','#FF522E','#fafff9','#FFD700','#FF69B4','#00E6F6','#82FF6A','#FF6666','#0ed156','#001130','#fd2a49'];
    for (let i = 0; i < 1200; i++) {
      particles.push({
        x: Math.random() * W,
        y: Math.random() * -H,
        r: 7 + Math.random() * 12,
        d: Math.random() * 180,
        color: colors[Math.floor(Math.random()*colors.length)],
        tilt: Math.random() * 16 - 8,
        tiltAngle: 0,
        tiltAngleIncremental: (Math.random() * 0.09) + .05,
        alpha: 0.84 + Math.random() * 0.16
      });
    }
    let angle = 0;
    function draw() {
      ctx.clearRect(0, 0, W, H);
      for (let i = 0; i < particles.length; i++) {
        ctx.beginPath();
        ctx.lineWidth = particles[i].r / 2;
        ctx.strokeStyle = particles[i].color;
        ctx.globalAlpha = particles[i].alpha;
        ctx.moveTo(particles[i].x + particles[i].tilt + particles[i].r / 4,
                   particles[i].y);
        ctx.lineTo(particles[i].x + particles[i].tilt, particles[i].y + particles[i].r);
        ctx.stroke();
      }
      update();
    }
    function update() {
      angle += 0.01;
      for (let i = 0; i < particles.length; i++) {
        particles[i].y += (Math.cos(angle + particles[i].d) + 3 + particles[i].r / 4) * 0.75;
        particles[i].x += Math.sin(angle) * 2.2;
        particles[i].tiltAngle += particles[i].tiltAngleIncremental;
        particles[i].tilt = Math.sin(particles[i].tiltAngle) * 16;
        if (particles[i].y > H) {
          particles[i].y = -15;
          particles[i].x = Math.random() * W;
        }
      }
    }
    let confettiAnimation = setInterval(draw, 12);
    setTimeout(() => {
      clearInterval(confettiAnimation);
      ctx.clearRect(0,0,W,H);
      canvas.style.display = 'none';
      document.body.style.overflow = "";
    }, 2200);
  }
  // CALEND√ÅRIO DE H√ÅBITOS
  const startDate = new Date("2025-05-21");
  const today = new Date();
  const habits = [
    "Beber 2L de √°gua",
    "Tirar selfie",
    "Verificar peso",
    "Dieta com alimentos integrais",
    "Acordar √†s 5h",
    "Medita√ß√£o (10 min por dia)",
    "Exerc√≠cio f√≠sico (20 min)",
    "Leitura (10 min)",
    "Sem a√ß√∫car",
    "Praticar Italiano"
  ];
  const cycleHabits = [
    "Afirma√ß√µes",
    "Banho gelado",
    "Exerc√≠cio de agilidade mental",
    "Di√°rio e gratid√£o"
  ];
  // Gera√ß√£o de h√°bitos do dia
  function getHabitsForDay(day) {
    // Cada 4 dias adiciona o pr√≥ximo h√°bito
    const unlocked = Math.floor((day-1)/4)+1;
    let dayHabits = [];
    for (let i = 0; i < unlocked && i < habits.length; ++i)
      dayHabits.push(habits[i]);
    return dayHabits;
  }
  // Gera√ß√£o de texto do dia (apenas novo h√°bito, ou quantidade + novo h√°bito)
  function getHabitsText(day) {
    const unlocked = Math.floor((day-1)/4)+1;
    if(day <= 4) return habits[day-1];
    // No ciclo: mostra total h√°bitos + o novo
    let txt = `${unlocked} h√°bitos + ${habits[unlocked-1]}`;
    return txt;
  }
  // Habito c√≠clico do dia
  function getCycleHabit(day) {
    return cycleHabits[(day-1)%cycleHabits.length];
  }
  // Gera√ß√£o das linhas do calend√°rio
  function renderCalendar() {
    let html = '';
    let date = new Date(startDate);
    let month = "";
    let table = '';
    let dias = 92; // Ajusute o n√∫mero total de dias
    let todayDay = Math.floor((new Date() - startDate) / (1000*60*60*24)) + 1;
    for(let d=1; d<=dias; d++) {
      let thisMonth = date.toLocaleString('pt-BR', { month: 'long', year:'numeric' }).toUpperCase();
      if (thisMonth !== month) {
        if (table) html += table + '</tbody></table>';
        html += `<div class="mes">${thisMonth}</div>
        <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Dia</th>
            <th>H√°bitos Di√°rios</th>
            <th>H√°bito C√≠clico</th>
          </tr>
        </thead>
        <tbody>
        `;
        month = thisMonth; table = '';
      }
      // COR DO PROGRESSO
      let completed = d < todayDay;
      // LINHA PRINCIPAL
      let habitsText = d <= 4 ? habits[d-1] : getHabitsText(d);
      let progressClass = completed ? 'gold' : '';
      table += `<tr class="main-row${completed ? " day-complete":""}" data-dia="${d}">
        <td class="${progressClass}">${date.toLocaleDateString('pt-BR')}</td>
        <td class="${progressClass}">Dia ${d}</td>
        <td class="${progressClass}"><span class="progress-text ${progressClass}">${habitsText||'-'}</span></td>
        <td class="${progressClass}">${getCycleHabit(d)||'-'}</td>
        <td class="expand-icon" onclick="toggleDropdown(this,${d})">&#9654;</td>
      </tr>
      <tr class="dropdown" id="dropdown-${d}">
        <td colspan="5">
          <div class="habit-list">
            ${
              getHabitsForDay(d).map((h,i)=>
                `<div class="habit-item${completed?" habit-complete":""}">
                  <span class="habit-emoji">${habitEmojis[i]||'‚≠ê'}</span>
                  <span class="habit-label">${h}</span>
                  <input type="checkbox" class="habit-checkbox" ${completed?'checked disabled':''}>
                </div>`).join('')
            }
            <div class="habit-item">
              <span class="habit-emoji">${cycleEmojis[(d-1)%cycleEmojis.length]}</span>
              <span class="habit-label">${getCycleHabit(d)}</span>
              <input type="checkbox" class="habit-checkbox" ${completed?'checked disabled':''}>
            </div>
          </div>
        </td>
      </tr>
      `;
      date.setDate(date.getDate()+1);
    }
    html += table + '</tbody></table>';
    document.getElementById('calendario').innerHTML = html;
  }
  renderCalendar();

  // Toggle drop
  window.toggleDropdown = function(icon, d) {
    let drop = document.getElementById('dropdown-'+d);
    let row = icon.closest('tr');
    let open = drop.classList.contains('active');
    document.querySelectorAll('.dropdown.active').forEach(e=>e.classList.remove('active'));
    document.querySelectorAll('tr.main-row.expanded').forEach(e=>e.classList.remove('expanded'));
    if (!open) {
      drop.classList.add('active');
      row.classList.add('expanded');
    }
  }

  // CELEBRATORY TEXT
  function celebrate() {
    document.getElementById('celebrate-text').style.display = "block";
    launchConfettiEpic();
    setTimeout(()=>{ document.getElementById('celebrate-text').style.display="none"; },1800);
    let audio = document.getElementById('celebrate-audio');
    if (audio) { audio.currentTime = 0; audio.play(); }
  }
  // Exemplo: celebrate(); // Para testar, chame celebrate()

  // Ajuste do banner encostar na linha
  function adjustBanner() {
    const banner = document.querySelector('.banner-gamer');
    const headerLine = document.querySelector('.header-line');
    if(!banner || !headerLine) return;
    // Ajusta a posi√ß√£o da imagem para tocar exatamente a linha
    let lineRect = headerLine.getBoundingClientRect();
    let bannerRect = banner.getBoundingClientRect();
    let shift = (lineRect.top - (bannerRect.top + bannerRect.height));
    banner.style.transform = `translate(-50%, ${shift+2}px)`;
  }
  window.addEventListener('resize', adjustBanner);
  window.addEventListener('DOMContentLoaded', adjustBanner);
  setTimeout(adjustBanner, 120);
</script>
</body>
</html>
